/* Richard Hetherington Updated version forked from https://github.com/abdennour/bootstrap-waitingfor */
;!function(e,a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return e.waitingDialog=a(t)}):e.waitingDialog=e.waitingDialog||a(e.jQuery)}(this,function(e){"use strict";function a(a){return a&&a.remove(),e('<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;"><div class="modal-dialog modal-m"><div class="modal-content"><div class="modal-header" style="display:none;"></div><div class="modal-body"><div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%;"></div></div><div class="progress-message" style="display:none;"></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div>')}var t,d,n={};return{show:function(n,s){"undefined"==typeof s&&(s={}),"undefined"==typeof n&&(n="Loading");var i,o,r=e.extend({headerText:"",headerSize:3,headerClass:"",dialogSize:"m",progressType:"",contentElement:"p",contentClass:"content",rtl:!0,timer:500,timeout:0,onHide:null},s);d=r,t=a(t),t.find(".modal-dialog").attr("class","modal-dialog").addClass("modal-"+r.dialogSize),t.find(".progress-bar").attr("class","progress-bar"),r.progressType&&t.find(".progress-bar").addClass("progress-bar-"+r.progressType),r.rtl&&t.find(".progress-bar").css("float","right").end().attr("dir","rtl"),i=e("<h"+r.headerSize+" />"),i.css({margin:0}),r.headerClass&&i.addClass(r.headerClass),o=e("<"+r.contentElement+" />"),r.contentClass&&o.addClass(r.contentClass),r.headerText===!1?(o.html(n),t.find(".progress-message").html(o).show()):r.headerText?(i.html(r.headerText),t.find(".modal-header").html(i).show(),o.html(n),t.find(".progress-message").html(o).show()):(i.html(n),t.find(".modal-header").html(i).show()),"function"==typeof r.onHide&&t.off("hidden.bs.modal").on("hidden.bs.modal",function(){r.onHide.call(t)}),t.modal()},hide:function(){"undefined"!=typeof t&&t.modal("hide")},message:function(e,a){"undefined"!=typeof t&&("undefined"!=typeof a&&t.find(".modal-header>h"+d.headerSize).html(a).show(),"undefined"!=typeof e&&t.find(".progress-message").html(e).show())},animate:function(e,a,s){if(a=a||d.timer,s=s||d.timeout,e=e||t.find(".modal-header>h"+d.headerSize).html(),n.animate=n.animate||[],"string"==typeof e&&(e=["..","....","......"].map(function(a){return e+a})),"object"==typeof e&&e instanceof Array){var i=e;e=function(e){var a=i.indexOf(e.html());if(0>a)e.html(i[0]);else{var t=a+1>=i.length?0:a+1;e.html(i[t])}}}if("function"==typeof e){a>s&&setTimeout(function(){e.call(t,t.find(".modal-header>h"+d.headerSize))},s);var o=setInterval(function(){e.call(t,t.find(".modal-header>h"+d.headerSize))},a);return n.animate.push(o),o}},stopAnimate:function(e){return e=e||n.animate[n.animate.length-1],clearInterval(e),delete n.animate[n.animate.indexOf(e)],t},progress:function(e,a){return arguments.length?(a&&(e=parseInt(e/a*100)),t.find(".progress-bar").css("width",e+"%"),t):parseInt(t.find(".progress-bar")[0].style.width)}}});
